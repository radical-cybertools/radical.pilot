
{
    "stampede2_ssh": {
        "description"                 : "The XSEDE 'Stampede' cluster at TACC (https://www.tacc.utexas.edu/stampede/).",
        "notes"                       : "Always set the ``project`` attribute in the PilotDescription or the pilot will fail.",
        "schemas"                     : ["local", "gsissh", "ssh"],
        "mandatory_args"              : ["project"],
        "gsissh"                      :
        {
            "job_manager_endpoint"    : "slurm+gsissh://stampede2.tacc.utexas.edu:2222/",
            "filesystem_endpoint"     : "gsisftp://stampede2.tacc.utexas.edu:2222/"
        },
        "ssh"                         :
        {
            "job_manager_endpoint"    : "slurm+ssh://stampede2.tacc.utexas.edu/",
            "filesystem_endpoint"     : "sftp://stampede2.tacc.utexas.edu/"
        },
        "local"                       :
        {
            "job_manager_endpoint"    : "slurm://stampede2.tacc.utexas.edu/",
            "filesystem_endpoint"     : "file://stampede2.tacc.utexas.edu/"
        },
        "default_queue"               : "normal",
        "resource_manager"            : "SLURM",
        "agent_scheduler"             : "CONTINUOUS",
        "agent_spawner"               : "POPEN",
        "agent_launch_method"         : "SSH",
        "task_launch_method"          : "SSH",
        "mpi_launch_method"           : "IBRUN",
        "pre_bootstrap_0"             : ["module load TACC",
                                         "module load intel/18.0.0",
                                         "module load python3/3.7.0"
                                        ],
        "default_remote_workdir"      : "$WORK2",
        "valid_roots"                 : ["/scratch", "$SCRATCH", "/work2", "$WORK2"],
        "rp_version"                  : "local",
        "virtenv_mode"                : "create",
        "python_dist"                 : "default",
        "export_to_task"              : ["LMOD_CMD",
                                         "LMOD_SYSTEM_DEFAULT_MODULES",
                                         "LD_LIBRARY_PATH"],
        "task_pre_exec"               : []
    },

    "stampede2_mpirun": {
        "description"                 : "The XSEDE 'Stampede' cluster at TACC (https://www.tacc.utexas.edu/stampede/).",
        "notes"                       : "Always set the ``project`` attribute in the PilotDescription or the pilot will fail.",
        "schemas"                     : ["local", "gsissh", "ssh"],
        "mandatory_args"              : ["project"],
        "gsissh"                      :
        {
            "job_manager_endpoint"    : "slurm+gsissh://stampede2.tacc.utexas.edu:2222/",
            "filesystem_endpoint"     : "gsisftp://stampede2.tacc.utexas.edu:2222/"
        },
        "ssh"                         :
        {
            "job_manager_endpoint"    : "slurm+ssh://stampede2.tacc.utexas.edu/",
            "filesystem_endpoint"     : "sftp://stampede2.tacc.utexas.edu/"
        },
        "local"                       :
        {
            "job_manager_endpoint"    : "slurm://stampede2.tacc.utexas.edu/",
            "filesystem_endpoint"     : "file://stampede2.tacc.utexas.edu/"
        },
        "default_queue"               : "normal",
        "resource_manager"            : "SLURM",
        "agent_scheduler"             : "CONTINUOUS",
        "agent_spawner"               : "POPEN",
        "agent_launch_method"         : "MPIRUN",
        "task_launch_method"          : "MPIRUN",
        "mpi_launch_method"           : "MPIRUN",
        "pre_bootstrap_0"             : ["module load TACC",
                                         "module load intel/18.0.0",
                                         "module load python3/3.7.0"
                                        ],
        "default_remote_workdir"      : "$WORK2",
        "valid_roots"                 : ["/scratch", "$SCRATCH", "/work2", "$WORK2"],
        "rp_version"                  : "local",
        "virtenv_mode"                : "create",
        "python_dist"                 : "default",
        "export_to_task"              : ["LMOD_CMD",
                                         "LMOD_SYSTEM_DEFAULT_MODULES",
                                         "LD_LIBRARY_PATH"],
        "task_pre_exec"               : ["module restore"]
    },

    "stampede2_ibrun_repex": {
        "description"                 : "The XSEDE 'Stampede' cluster at TACC (https://www.tacc.utexas.edu/stampede/).",
        "notes"                       : "Always set the ``project`` attribute in the PilotDescription or the pilot will fail.",
        "schemas"                     : ["local", "gsissh", "ssh"],
        "mandatory_args"              : ["project"],
        "gsissh"                      :
        {
            "job_manager_endpoint"    : "slurm+gsissh://stampede2.tacc.utexas.edu:2222/",
            "filesystem_endpoint"     : "gsisftp://stampede2.tacc.utexas.edu:2222/"
        },
        "ssh"                         :
        {
            "job_manager_endpoint"    : "slurm+ssh://stampede2.tacc.utexas.edu/",
            "filesystem_endpoint"     : "sftp://stampede2.tacc.utexas.edu/"
        },
        "local"                       :
        {
            "job_manager_endpoint"    : "slurm://stampede2.tacc.utexas.edu/",
            "filesystem_endpoint"     : "file://stampede2.tacc.utexas.edu/"
        },
        "cores_per_node"              : 68,
        "default_queue"               : "normal",
        "resource_manager"            : "SLURM",
        "agent_scheduler"             : "CONTINUOUS",
        "agent_spawner"               : "POPEN",
        "agent_launch_method"         : "IBRUN",
        "task_launch_method"          : "IBRUN",
        "mpi_launch_method"           : "IBRUN",
      # "blocked_cores"               : [64, 65, 66, 67],
      # "blocked_gpus"                : [0],
        "pre_bootstrap_0"             : ["module load TACC",
                                         "module load intel/18.0.0",
                                         "module load python3/3.7.0"
                                        ],
        "default_remote_workdir"      : "$WORK2",
        "valid_roots"                 : ["/scratch", "$SCRATCH", "/work2", "$WORK2"],
        "rp_version"                  : "local",
        "virtenv_mode"                : "create",
        "python_dist"                 : "default",
        "export_to_task"              : ["LMOD_CMD",
                                         "LMOD_SYSTEM_DEFAULT_MODULES",
                                         "LD_LIBRARY_PATH"],
        "task_pre_exec"               : []
    },

    "stampede2_ibrun": {
        "description"                 : "The XSEDE 'Stampede' cluster at TACC (https://www.tacc.utexas.edu/stampede/).",
        "notes"                       : "Always set the ``project`` attribute in the ComputePilotDescription or the pilot will fail.",
        "schemas"                     : ["local", "gsissh", "ssh"],
        "mandatory_args"              : ["project"],
        "gsissh"                      :
        {
            "job_manager_endpoint"    : "slurm+gsissh://stampede2.tacc.utexas.edu:2222/",
            "filesystem_endpoint"     : "gsisftp://stampede2.tacc.utexas.edu:2222/"
        },
        "ssh"                         :
        {
            "job_manager_endpoint"    : "slurm+ssh://stampede2.tacc.utexas.edu/",
            "filesystem_endpoint"     : "sftp://stampede2.tacc.utexas.edu/"
        },
        "local"                       :
        {
            "job_manager_endpoint"    : "slurm://stampede2.tacc.utexas.edu/",
            "filesystem_endpoint"     : "file://stampede2.tacc.utexas.edu/"
        },
        "cores_per_node"              : 68,
        "default_queue"               : "normal",
        "resource_manager"            : "SLURM",
        "agent_scheduler"             : "CONTINUOUS",
        "agent_spawner"               : "POPEN",
        "agent_launch_method"         : "IBRUN",
        "task_launch_method"          : "IBRUN",
        "mpi_launch_method"           : "IBRUN",
        "pre_bootstrap_0"             : ["module load TACC",
                                        "module load intel/18.0.0",
                                        "module load python3/3.7.0"
                                        ],
        "default_remote_workdir"      : "$WORK",
        "valid_roots"                 : ["/scratch", "$SCRATCH", "/work", "$WORK"],
        "rp_version"                  : "local",
        "virtenv_mode"                : "create",
        "python_dist"                 : "default",
        "export_to_cu"                : ["LMOD_CMD",
                                         "LMOD_SYSTEM_DEFAULT_MODULES",
                                         "LD_LIBRARY_PATH"],
        "cu_pre_exec"                 : ["module restore"]
    },

    "stampede2_srun": {
        "description"                 : "The XSEDE 'Stampede' cluster at TACC (https://www.tacc.utexas.edu/stampede/).",
        "notes"                       : "Always set the ``project`` attribute in the PilotDescription or the pilot will fail.",
        "schemas"                     : ["local", "gsissh", "ssh"],
        "mandatory_args"              : ["project"],
        "gsissh"                      :
        {
            "job_manager_endpoint"    : "slurm+gsissh://stampede2.tacc.utexas.edu:2222/",
            "filesystem_endpoint"     : "gsisftp://stampede2.tacc.utexas.edu:2222/"
        },
        "ssh"                         :
        {
            "job_manager_endpoint"    : "slurm+ssh://stampede2.tacc.utexas.edu/",
            "filesystem_endpoint"     : "sftp://stampede2.tacc.utexas.edu/"
        },
        "local"                       :
        {
            "job_manager_endpoint"    : "slurm://stampede2.tacc.utexas.edu/",
            "filesystem_endpoint"     : "file://stampede2.tacc.utexas.edu/"
        },
        "default_queue"               : "normal",
        "resource_manager"            : "SLURM",
        "agent_scheduler"             : "CONTINUOUS",
        "agent_spawner"               : "POPEN",
        "agent_launch_method"         : "SRUN",
        "task_launch_method"          : "SRUN",
        "mpi_launch_method"           : "SRUN",
        "pre_bootstrap_0"             : ["module load TACC",
                                         "module load intel/18.0.0",
                                         "module load python3/3.7.0"
                                        ],
        "default_remote_workdir"      : "$WORK2",
        "valid_roots"                 : ["/scratch", "$SCRATCH", "/work2", "$WORK2"],
        "rp_version"                  : "local",
        "virtenv_mode"                : "create",
        "python_dist"                 : "default",
        "export_to_task"              : ["LMOD_CMD",
                                         "LMOD_SYSTEM_DEFAULT_MODULES",
                                         "LD_LIBRARY_PATH"],
        "task_pre_exec"               : []
    },

    "bridges2": {
        "description"                 : "The XSEDE 'Bridges2' cluster at PSC (https://portal.xsede.org/psc-bridges/).",
        "notes"                       : "Always set the ``project`` attribute in the PilotDescription.",
        "schemas"                     : ["local", "gsissh", "ssh"],
      # "mandatory_args"              : [],
        "local"                      :
        {
            "job_manager_endpoint"    : "slurm://bridges2.psc.xsede.org/",
            "filesystem_endpoint"     : "file://bridges2.psc.xsede.org/"
        },
        "gsissh"                      :
        {
            "job_manager_endpoint"    : "slurm+gsissh://bridges2.psc.xsede.org:2222/",
            "filesystem_endpoint"     : "gsisftp://bridges2.psc.xsede.org:2222/"
        },
        "ssh"                         :
        {
            "job_manager_endpoint"    : "slurm+ssh://bridges2.psc.xsede.org/",
            "filesystem_endpoint"     : "sftp://bridges2.psc.xsede.org/"
        },
        "default_queue"               : "RM",
        "resource_manager"            : "SLURM",
        "lfs_path_per_node"           : "${LOCAL}",
        "lfs_size_per_node"           : 2516582,
        "agent_scheduler"             : "CONTINUOUS",
        "agent_spawner"               : "POPEN",
        "agent_launch_method"         : "SSH",
        "task_launch_method"          : "MPIRUN",
        "mpi_launch_method"           : "MPIRUN",
        "pre_bootstrap_0"             : ["module reset",
                                         "module load gcc",
                                         "module load openmpi/3.1.6-gcc8.3.1",
                                         "module load anaconda3"
                                        ],
        "default_remote_workdir"      : "$PROJECT",
        "valid_roots"                 : ["/home", "/ocean"],
        "rp_version"                  : "local",
        "virtenv_mode"                : "create",
        "python_dist"                 : "anaconda",
        "export_to_task"              : [],
        "task_pre_exec"               : [],
        "gpus_per_node"               : 8,
        "system_architecture"         : {"gpu": "v100"}
    }
}
